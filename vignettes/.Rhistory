shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
library("visualisationIMPACT")
library(magrittr)
library("ggthemes")
library("rlang")
library(extrafont)
data<-read.csv("../tests/testthat/testdata.csv")
dependent.var = "hhnumberindividuals"
independent.var = "region"
result <- data %>% dplyr::select(c( independent.var , dependent.var)) %>% dplyr::group_by_(independent.var) %>% dplyr::summarise_all(c(average=mean,min=min,max=max))
extrafont::loadfonts(device="win")
result$average <- c(0.5,0.50, 0.30, 0.70, 0.3, 0.8, 0.1)
theplot <- barchart_impact(.data = result, x = region, y = average, sens.barchart = "horizontal", percent = TRUE, scale.percent = 100)
theplot
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
dependent.var = "hhnumberindividuals"
independent.var = "region"
result <- data %>% dplyr::select(c( independent.var , dependent.var)) %>% dplyr::group_by_(independent.var) %>% dplyr::summarise_all(c(average=mean,min=min,max=max))
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
source('~/GitHub/visualisationIMPACT/R/checking_utilities.R')
source('~/GitHub/visualisationIMPACT/R/impact_style.R')
source('~/GitHub/visualisationIMPACT/R/utilities.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
#' Reach brand reds
#'
reach_style_color_red<-function(lightness=1){
if      (lightness==1){rgb(238/255,88/255,89/255)}
else if (lightness==2){rgb(238/255,88/255,89/255,0.5)}
else if (lightness==3){rgb(238/255,88/255,89/255,0.3)}
}
#' reach brand light greys
#'
#'
#'
reach_style_color_lightgrey<-function(lightness=1){
if      (lightness==1){rgb(209/255,211/255,212/255)}
else if (lightness==2){rgb(209/255,211/255,212/255,0.5)}
else if (lightness==3){rgb(209/255,211/255,212/255,0.3)}
}
#' reach brand beiges
#'
#'
reach_style_color_beige<-function(lightness=1){
if      (lightness==1){rgb(210/255,203/255,184/255)}
else if (lightness==2){rgb(210/255,203/255,184/255,0.5)}
else if (lightness==3){rgb(210/255,203/255,184/255,0.3)}
}
#' Reach brand dark greys
#'
#'
#'
reach_style_color_darkgrey<-function(lightness=1){
if      (lightness==1){rgb(88/255,88/255,90/255)}
else if (lightness==2){rgb(88/255,88/255,90/255,0.5)}
else if (lightness==3){rgb(88/255,88/255,90/255,0.3)}
}
# COLOUR TRIPLES
#' Reach brand reds triples
#'
#'
#'
#'
#'
reach_style_color_reds<-function(){
vapply(1:3,FUN.VALUE = vector(mode = 'character',length = 1),reach_style_color_red)
}
# COLOUR TRIPLES
#' Reach brand dark grey triples
#'
#'
#'
#'
#'
reach_style_color_darkgreys<-function(){
vapply(1:3,FUN.VALUE = vector(mode = 'character',length = 1),reach_style_color_darkgrey)
}
# COLOUR TRIPLES
#' Reach brand light greys triples
#'
#'
#'
reach_style_color_lightgreys<-function(){
vapply(1:3,FUN.VALUE = vector(mode = 'character',length = 1),reach_style_color_lightgrey)
}
# COLOUR TRIPLES
#' Reach brand beige triples
#'
#'
#'
reach_style_color_beiges<-function(){
vapply(1:3,FUN.VALUE = vector(mode = 'character',length = 1),reach_style_color_beige)
}
reach_style_color_rainbow<-function(n){
cols<-c(rev(reach_style_color_darkgreys()[1]),(reach_style_color_reds()[3]),rev(reach_style_color_beiges()[1]))
# cols<-rep(cols,ceiling(n/12))[1:3]
colorRampPalette(cols)(n)
}
reach_style_color_rainbow<-function(n){
cols<-c(rev(reach_style_color_darkgreys()[1]),(reach_style_color_reds()[3]),rev(reach_style_color_beiges()[1]))
# cols<-rep(cols,ceiling(n/12))[1:3]
colorRampPalette(cols)(n)
}
scale_fill_reach_categorical<-function(n,name="",...){
structure(list(
scale_fill_manual(values= reach_style_color_categorical(n),name=name,...)
))
}
scale_color_reach_categorical<-function(n,name="",...){
structure(list(
scale_color_manual(values= reach_style_color_categorical(n),name=name,...)
))
}
reach_style_color_categorical<-function(n){
m<-4
cols<-colorRampPalette(c(reach_style_color_darkgreys()[3],
reach_style_color_reds()[1],
reach_style_color_beiges()[1],
reach_style_color_lightgreys()[2]
# reach_style_color_re()[3]
))(n)
# .show_colors(cols)
# colorder<-sapply(1:(n/m),function(x){x+(c(0:(m-1))*n/m)}) %>% as.vector %>% rank
# cols<-cols[colorder[1:length(cols)]]
# .show_colors(cols)
cols
}
categorical_col_order<-function(n){
orders<-list(
1,
c(1:2),
c(1:3),
c(1:4)
)
}
scale_color_discrete_reach <- function(color='red'){
structure(list(
scale_color_manual(values= get(paste0('reach_style_color_',color,'s'))())
))
}
# GGPLOT GRADIENTS
scale_fill_reach <- function(color=NULL,name="",...){
if(is.null(color)){
}else{
structure(list(
scale_fill_manual(values= get(paste0('reach_style_color_',color,'s'))(),name=name,...)
))}
}
scale_color_continuous_reachn <- function(color='red'){
structure(list(
scale_color_gradientn(colours = get(paste0('reach_style_color_',color,'s'))())
))
}
.show_colors<-function(cols){
plot(1:length(cols),1:length(cols),cex=20,pch=20,col=cols,axes=FALSE)
}
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
setwd("~/GitHub/visualisationIMPACT/vignettes")
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
source('~/GitHub/visualisationIMPACT/R/impact_style.R')
source('~/GitHub/visualisationIMPACT/R/checking_utilities.R')
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
source('~/GitHub/visualisationIMPACT/R/utilities.R')
source('~/GitHub/visualisationIMPACT/R/scale_plot.R')
source('~/GitHub/visualisationIMPACT/R/reach_color.R')
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
data<-read.csv("../tests/testthat/testdata.csv")
library("visualisationIMPACT")
library(magrittr)
library("ggthemes")
library("rlang")
library(extrafont)
data<-read.csv("../tests/testthat/testdata.csv")
dependent.var = "hhnumberindividuals"
independent.var = "region"
result <- data %>% dplyr::select(c( independent.var , dependent.var)) %>% dplyr::group_by_(independent.var) %>% dplyr::summarise_all(c(average=mean,min=min,max=max))
extrafont::loadfonts(device="win")
1
1
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
library(gridExtra)
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
result$average <- c(0.5,0.50, 0.30, 0.70, 0.3, 0.8, 0.1)
theplot <- barchart_impact(.data = result, x = region, y = average, sens.barchart = "horizontal", percent = TRUE, scale.percent = 100)
theplot
regions.value=c("capitalcentral","capitalcentral","capitalcentral","north", "north","north","south","south","south","west","west","west")
choices_value=c("yes","no", "bb","yes","no", "bb","yes","no","bb","yes","no","bb")
result_percent=c(40,50,100,30,200,30,50,70, 20,50, 60, 70 )
min_value <- result_percent - 10
max_value <-result_percent + 20
table_result <- data.frame(region=regions.value, choice=choices_value, percents=result_percent, infimum_error=min_value, supremum_error=max_value)
theplot <- grouped_barchart_impact(table_result, region , choice , percents, infimum_error, supremum_error, sens.barchart="horizontal", percent = FALSE )
theplot
regions.value=c("capitalcentral","capitalcentral","capitalcentral","north", "north","north","south","south","south","west","west","west")
choices_value=c("yes","no", "bb","yes","no", "bb","yes","no","bb","yes","no","bb")
result_percent=c(40,50,100,30,200,30,50,70, 20,50, 60, 70 )
min_value <- result_percent - 10
max_value <-result_percent + 20
table_result <- data.frame(region=regions.value, choice=choices_value, percents=result_percent, infimum_error=min_value, supremum_error=max_value)
theplot <- grouped_barchart_impact(table_result, region , choice , percents, infimum_error, supremum_error, sens.barchart="horizontal", percent = FALSE )
theplot
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
result$average <- c(0.5,0.50, 0.30, 0.70, 0.3, 0.8, 0.1)
theplot <- barchart_impact(.data = result, x = region, y = average, sens.barchart = "horizontal", percent = TRUE, scale.percent = 100)
theplot
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
data<-read.csv("../tests/testthat/testdata.csv")
dependent.var = "hhnumberindividuals"
independent.var = "region"
result <- data %>% dplyr::select(c( independent.var , dependent.var)) %>% dplyr::group_by_(independent.var) %>% dplyr::summarise_all(c(average=mean,min=min,max=max))
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
result$average <- c(0.5,0.50, 0.30, 0.70, 0.3, 0.8, 0.1)
theplot <- barchart_impact(.data = result, x = region, y = average, sens.barchart = "horizontal", percent = TRUE, scale.percent = 100)
theplot
result$average <- c(200, 50,40,30, 10,5,40)
testthat::expect_error(barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = TRUE, scale.percent = 100))
regions.value=c("capitalcentral","capitalcentral", "north","north","south","south","west","west")
choices_value=c("yes","no","yes","no","yes","no","yes","no")
result_percent= c(0.5,0.50, 0.30, 0.70, 0.45,0.55, 0.90,0.10)
min_value <- result_percent-5
max_value <- result_percent+5
table_result <- data.frame(region=regions.value, choice=choices_value, percents=result_percent, infimum_error=min_value, supremum_error=max_value)
grouped_barchart_impact(table_result, region , choice , percents, infimum_error, supremum_error, sens.barchart="vertical", percent = TRUE, scale.percent = 1 ) + scale_y_continuous(limits = c(0,7))
regions.value=c("capitalcentral","capitalcentral", "north","north","south","south","west","west")
choices_value=c("yes","no","yes","no","yes","no","yes","no")
result_percent= c(0.5,0.50, 0.30, 0.70, 0.45,0.55, 0.90,0.10)
min_value <- result_percent-5
max_value <- result_percent+5
table_result <- data.frame(region=regions.value, choice=choices_value, percents=result_percent, infimum_error=min_value, supremum_error=max_value)
grouped_barchart_impact(table_result, region , choice , percents, infimum_error, supremum_error, sens.barchart="vertical", percent = TRUE, scale.percent = 1 ) + scale_y_continuous(limits = c(0,7))
regions.value=c("capitalcentral","capitalcentral","capitalcentral","north", "north","north","south","south","south","west","west","west")
choices_value=c("yes","no", "bb","yes","no", "bb","yes","no","bb","yes","no","bb")
result_percent=c(40,50,100,30,200,30,50,70, 20,50, 60, 70 )
min_value <- result_percent - 10
max_value <-result_percent + 20
table_result <- data.frame(region=regions.value, choice=choices_value, percents=result_percent, infimum_error=min_value, supremum_error=max_value)
theplot <- grouped_barchart_impact(table_result, region , choice , percents, infimum_error, supremum_error, sens.barchart="horizontal", percent = FALSE )
theplot
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
source('~/GitHub/visualisationIMPACT/R/barchart_functions.R')
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
library("visualisationIMPACT")
library(magrittr)
library("ggthemes")
library("rlang")
library(extrafont)
library(gridExtra)
data<-read.csv("../tests/testthat/testdata.csv")
dependent.var = "hhnumberindividuals"
independent.var = "region"
result <- data %>% dplyr::select(c( independent.var , dependent.var)) %>% dplyr::group_by_(independent.var) %>% dplyr::summarise_all(c(average=mean,min=min,max=max))
sens <- orientation_plot(result, region, 10, 10)
result$min <- c(2,2,5,3,NA,3,3)
barchart_impact(.data = result, x = region, y = average, infimum_error = min, supremum_error = max, sens.barchart = sens, percent = FALSE)
ggsave(filename = "test.jpg", plot = last_plot(), width = 6, height = 4, units = "cm")
